# Copyright 1999-2018 Gentoo Foundation
# Distributed under the terms of the GNU General Public License v2

EAPI=6

PYTHON_COMPAT=( python3_{5,6} )
inherit python-single-r1

HASH_COMMIT="04356101ec8e9466bc72f8846fd7d83ccac98ba8"

DESCRIPTION="A post-exploitation framework with Windows/Linux agents"
HOMEPAGE="https://github.com/byt3bl33d3r/DeathStar"
SRC_URI="https://github.com/byt3bl33d3r/DeathStar/archive/${HASH_COMMIT}.tar.gz -> ${P}.tar.gz"
KEYWORDS="~amd64 ~x86"

LICENSE="BSD-3"
SLOT="0"
KEYWORDS="~amd64 ~x86"
IUSE=""

RDEPEND=">=dev-python/requests-2.3.0[${PYTHON_USEDEP}]
	dev-python/termcolor[${PYTHON_USEDEP}]
	dev-python/pyopenssl[${PYTHON_USEDEP}]
	app-exploits/empire"
DEPEND="${RDEPEND}"

S="${WORKDIR}/DeathStar-${HASH_COMMIT}"

src_install() {
	dobin DeathStar.py
}

pkg_postinst() {
	elog "See the following URL:"
	elog "https://byt3bl33d3r.github.io/automating-the-empire-with-the-death-star-getting-domain-admin-with-a-push-of-a-button.html"
}
