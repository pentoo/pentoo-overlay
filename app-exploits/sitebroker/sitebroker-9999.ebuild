# Copyright 1999-2017 Gentoo Foundation
# Distributed under the terms of the GNU General Public License v2

EAPI=6

PYTHON_COMPAT=( python2_7 ) ## 3.x seems in the works. 

inherit python-single-r1 inherit git-r3
# distutils-r1 

DESCRIPTION="A cross-platform python based utility to penetrate websites and test them with approximately every angle."
HOMEPAGE="https://github.com/Anon-Exploiter/SiteBroker"
	MY_P=${P}
	EGIT_REPO_URI="https://github.com/Anon-Exploiter/SiteBroker.git"
LICENSE="BSD"
SLOT="0"
KEYWORDS=""

IUSE="-doc -desktopicons"
DEPEND="dev-python/beautifulsoup
	dev-python/requests
    dev-python/lxml
	dev-python/future
	virtual/python-dnspython
	dev-python/colorama
	dev-python/urllib3
	dev-python/certifi
	dev-python/idna
	dev-python/chardet"
RDEPEND="${DEPEND}"


S="${WORKDIR}/${P}"

src_prepare() {
# 
}

src_install() {
	dodir /opt/${PN}
	insinto  /opt/${PN}
	doins -r sitebroker/ SiteBroker.py
	fperms +x /opt/${PN}/SiteBroker.py
	dosym "${EPREFIX}"/opt/${PN}/SiteBroker.py /usr/bin/sitebroker

	if use doc; then
		einstalldocs /usr/share/doc/${PN}/
		dodoc -r /{README.md,LICENSE}
	fi

	#FIXME: convert to desktop.eclass
	if use desktopicons; then
		dodir /usr/share/icons/${PN}/
		#cp  ${FILES}/{sitebroker.png,sitebroker.svg}  /usr/share/icons/${PN}/
		dodir  /usr/share/applications/${PN}/
		cp ${FILES}*.desktop  /usr/share/applications/${PN}/
		fixperms +r +x /usr/share/applications/${PN}/*.desktop
	fi

}

